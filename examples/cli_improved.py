# ê¸°ì¡´ cli.pyì˜ execute_workflow ë©”ì„œë“œë¥¼ ê°ì²´ì§€í–¥ìœ¼ë¡œ ê°œì„ í•œ ë²„ì „\n\nfrom src.utils.message import MessageProcessor, RichMessageDisplay\n\nclass DecepticonCLI:\n    def __init__(self):\n        # ... ê¸°ì¡´ ì´ˆê¸°í™” ì½”ë“œ ...\n        \n        # ìƒˆë¡œìš´ ê°ì²´ì§€í–¥ ë©”ì‹œì§€ ì²˜ë¦¬ ì‹œìŠ¤í…œ\n        self.message_processor = MessageProcessor()\n        self.message_display = RichMessageDisplay(self.console)\n    \n    async def execute_workflow_v2(self, user_input: str):\n        \"\"\"ê°œì„ ëœ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ - ê°ì²´ì§€í–¥ ë°©ì‹\"\"\"\n        if not self.swarm:\n            error_panel = Panel(\n                \"[bold red]âŒ Swarm not initialized[/bold red]\",\n                box=box.ROUNDED, border_style=\"red\"\n            )\n            self.console.print(error_panel)\n            return False\n        \n        # ì¤‘ë³µ ì²´í¬ ì´ˆê¸°í™”\n        self.message_processor.reset_duplicate_check()\n        \n        # ë¡œê¹…\n        self.logger.log_user_input(user_input)\n        \n        # ì‚¬ìš©ì ë©”ì‹œì§€ í‘œì‹œ\n        self.message_display.display_user_message(user_input)\n        \n        inputs = {\"messages\": [HumanMessage(content=user_input)]}\n        \n        with Progress(\n            SpinnerColumn(),\n            TextColumn(\"[progress.description]{task.description}\"),\n            console=self.console,\n            transient=True\n        ) as progress:\n            main_task = progress.add_task(\"[bold green]ğŸ¤– Working...\", total=None)\n            \n            try:\n                async for namespace, output in self.swarm.astream(\n                    inputs, stream_mode=\"updates\", config=self.config, subgraphs=True\n                ):\n                    for node, value in output.items():\n                        agent_name = get_agent_name(namespace)\n                        \n                        if \"messages\" in value and value[\"messages\"]:\n                            latest_message = value[\"messages\"][-1]\n                            \n                            # ğŸ¯ í•µì‹¬: ë³µì¡í•œ ë©”ì‹œì§€ ì²˜ë¦¬ë¥¼ í•œ ì¤„ë¡œ!\n                            processed_message = self.message_processor.process_langchain_message(\n                                latest_message, agent_name, namespace\n                            )\n                            \n                            # ì¤‘ë³µ ì²´í¬\n                            if not self.message_processor.is_duplicate_message(processed_message):\n                                progress.stop()\n                                \n                                # ğŸ¨ ë©”ì‹œì§€ í‘œì‹œë„ ê°„ë‹¨í•˜ê²Œ!\n                                if processed_message.type == \"ai\":\n                                    self.message_display.display_agent_message(\n                                        processed_message.agent_name,\n                                        processed_message.content,\n                                        processed_message.tool_calls\n                                    )\n                                    \n                                    # ë¡œê¹…\n                                    self.logger.log_agent_response(\n                                        agent_name=processed_message.agent_name,\n                                        content=processed_message.content,\n                                        tool_calls=processed_message.tool_calls\n                                    )\n                                \n                                elif processed_message.type == \"tool\":\n                                    self.message_display.display_tool_message(\n                                        processed_message.tool_name,\n                                        processed_message.content\n                                    )\n                                    \n                                    # ë¡œê¹…\n                                    self.logger.log_tool_output(\n                                        tool_name=processed_message.tool_name,\n                                        output=processed_message.content\n                                    )\n                                \n                                progress.start()\n                                progress.update(main_task, description=\"[bold blue]ğŸ¤– Working...[/bold blue]\")\n                \n                progress.update(main_task, description=\"[bold green]âœ… Workflow completed!\")\n                time.sleep(1)\n                progress.stop()\n                \n                return True\n                \n            except Exception as e:\n                progress.update(main_task, description=f\"[bold red]âŒ Error: {str(e)}\")\n                progress.stop()\n                return False\n\n\"\"\"\nğŸ¯ ì£¼ìš” ê°œì„ ì‚¬í•­:\n\n1. ì½”ë“œ ê¸¸ì´: 200+ ì¤„ â†’ 80ì¤„ (60% ë‹¨ì¶•)\n2. ë³µì¡ì„±: ë†’ìŒ â†’ ë‚®ìŒ\n3. ì¬ì‚¬ìš©ì„±: ë‚®ìŒ â†’ ë†’ìŒ (app.pyì™€ ê³µí†µ ì‚¬ìš©)\n4. ìœ ì§€ë³´ìˆ˜ì„±: ì–´ë ¤ì›€ â†’ ì‰¬ì›€\n5. í…ŒìŠ¤íŠ¸ ìš©ì´ì„±: ì–´ë ¤ì›€ â†’ ì‰¬ì›€\n\nê¸°ì¡´ ì½”ë“œì—ì„œ ì œê±°ëœ ë¶€ë¶„ë“¤:\n- extract_message_content() ì§ì ‘ í˜¸ì¶œ\n- extract_tool_calls() ì§ì ‘ í˜¸ì¶œ  \n- is_raw_tool_call_content() í•¨ìˆ˜\n- Rich Panel ìˆ˜ë™ ìƒì„±\n- ë³µì¡í•œ content/tool_calls ë¶„ê¸° ì²˜ë¦¬\n- ë§ˆí¬ì—… ì•ˆì „ ì²˜ë¦¬ ìˆ˜ë™ êµ¬í˜„\n\nëª¨ë“  ê²ƒì´ MessageProcessorì™€ RichMessageDisplayë¡œ ìº¡ìŠí™”ë¨!\n\"\"\"\n